# ==============================================================================
# MCP Universal Product Adapter Configuration
# ==============================================================================
# This file configures the MCP adapter to work with multiple product backends

# Default backend to use
default_backend: idss

# Backend configurations
backends:
  # IDSS - Vehicle Recommendation System
  idss:
    type: vehicle
    url: http://localhost:8000
    endpoints:
      search: /chat
      detail: null  # Uses direct DB access
    settings:
      timeout: 30
      max_results: 100
    product_id_prefix: VIN-
    
  # PostgreSQL - E-commerce Products
  postgres:
    type: ecommerce
    url: null  # Direct DB connection
    endpoints:
      search: null
      detail: null
    settings:
      cache_ttl: 300  # 5 minutes
      inventory_cache_ttl: 30  # 30 seconds
    product_id_prefix: PROD-
    
  # Future: Real Estate Backend
  real_estate:
    type: real_estate
    url: http://localhost:9000
    endpoints:
      search: /api/search
      detail: /api/properties/{id}
    settings:
      timeout: 15
      max_results: 50
    product_id_prefix: PROP-
    
  # Future: Travel/Hospitality Backend
  travel:
    type: travel
    url: http://localhost:9001
    endpoints:
      search: /api/search
      detail: /api/bookings/{id}
    settings:
      timeout: 20
      max_results: 30
    product_id_prefix: BOOK-

# Product type mappings
# Maps product categories to backend types
product_types:
  vehicle:
    backend: idss
    display_name: Vehicles
    categories:
      - Sedan
      - SUV
      - Truck
      - Coupe
      - Convertible
      - Wagon
      - Van
      - Hatchback
    filters:
      - name: price
        type: range
        unit: dollars
      - name: mileage
        type: range
        unit: miles
      - name: year
        type: range
        unit: year
      - name: make
        type: select
      - name: body_style
        type: select
      - name: fuel_type
        type: select
        
  ecommerce:
    backend: postgres
    display_name: Products
    categories:
      - Electronics
      - Books
      - Clothing
      - Home & Garden
      - Sports
      - Toys
    filters:
      - name: price
        type: range
        unit: dollars
      - name: brand
        type: select
      - name: category
        type: select
      - name: rating
        type: range
        unit: stars
        
  real_estate:
    backend: real_estate
    display_name: Properties
    categories:
      - House
      - Apartment
      - Condo
      - Townhouse
      - Land
    filters:
      - name: price
        type: range
        unit: dollars
      - name: bedrooms
        type: range
      - name: bathrooms
        type: range
      - name: square_feet
        type: range
      - name: property_type
        type: select
        
  travel:
    backend: travel
    display_name: Travel
    categories:
      - Flight
      - Hotel
      - Car Rental
      - Package
    filters:
      - name: price
        type: range
        unit: dollars
      - name: dates
        type: date_range
      - name: destination
        type: location
      - name: travelers
        type: number

# Response formatting
response:
  # Include timing information in responses
  include_trace: true
  
  # Include version information
  include_version: true
  
  # Max items per page
  max_page_size: 100
  
  # Default page size
  default_page_size: 10

# Caching strategy
cache:
  enabled: true
  redis_url: redis://localhost:6379
  ttl:
    product_summary: 300  # 5 minutes
    product_detail: 300   # 5 minutes
    search_results: 60    # 1 minute
    inventory: 30         # 30 seconds

# Logging
logging:
  level: INFO
  format: json
  include_request_id: true
  log_slow_queries: true
  slow_query_threshold_ms: 1000
